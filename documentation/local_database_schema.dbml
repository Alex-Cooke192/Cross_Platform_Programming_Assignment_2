// Local DB (Drift / SQLite)
// UUID primary keys stored as TEXT
// Timestamps stored as DATETIME (Drift DateTimeColumn)
// Sync metadata stored as sync_status (default 'pending' in Drift)

Table technicians_cache {
  id text [pk]                 // UUID from server / domain
  name text [not null]         // display name

  created_at datetime [not null]
  updated_at datetime [not null]

  sync_status text [not null, default: 'pending']
}

Table inspections {
  id text [pk]
  aircraft_id text [not null]

  opened_at datetime           // nullable

  created_at datetime [not null]
  updated_at datetime [not null]

  is_completed boolean [not null, default: false]
  completed_at datetime        // nullable

  technician_id text           // nullable FK -> technicians_cache.id

  sync_status text [not null, default: 'pending']
}

Table tasks {
  id text [pk]
  inspection_id text [not null] // FK -> inspections.id (ON DELETE CASCADE)

  title text [not null]

  is_completed boolean [not null, default: false]
  result text                   // nullable
  notes text                    // nullable

  created_at datetime [not null]
  updated_at datetime [not null]

  sync_status text [not null, default: 'pending']

  Indexes {
    (inspection_id) [name: "tasks_inspection_id"]
  }
}

Ref: inspections.technician_id > technicians_cache.id
Ref: tasks.inspection_id > inspections.id [delete: cascade]

